function _isEnabled(submoduleName){return-1!==AOSsettings.enabledSubmodules.indexOf(submoduleName)}function initCKE(){function addCKEtoolbars(instance){var plugins=instance.extraPlugins.split(",");for(i=0;i<plugins.length;i++){var toolbarName=plugins[i];CKEtoolbars.hasOwnProperty(toolbarName)&&-1!==enabledCKEplugins.indexOf(toolbarName)&&instance.toolbar.unshift(CKEtoolbars[toolbarName])}}var CKEplugins=ProcessWire.config.InputfieldCKEditor.plugins,enabledCKEplugins=AOSsettings.CKEaddons_plugins,CKEskin=AOSsettings.CKEaddons_skin,CKEenabledFields=AOSsettings.CKEaddons_enabledFields,CKEpluginCount=enabledCKEplugins.length,CKEtoolbars={codesnippet:["CodeSnippet"],div:["CreateDiv"],find:["Find","Replace"],justify:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],indentblock:["Indent","Outdent"],maximize:["Maximize"],oembed:["oembed"],showblocks:["ShowBlocks"],templates:["Templates"],token:["CreateToken"]};if(window.CKEpluginDependencies={autosave:"notification",codesnippet:"widget,dialog,lineutils",indentblock:"indent",oembed:"widget,lineutils",token:"widget,dialog,lineutils"},enabledCKEplugins&&enabledCKEplugins.reverse(),CKEpluginCount>0)for(var dependencies,dependentPlugins=["oembed","autosave","indentblock","codesnippet","token"],i=0;i<CKEpluginCount;i++){var pluginName=enabledCKEplugins[i];if(-1!==dependentPlugins.indexOf(pluginName)&&CKEpluginDependencies[pluginName]){dependencies=CKEpluginDependencies[pluginName].split(",");for(var k in dependencies)dependencies.hasOwnProperty(k)&&(CKEplugins[dependencies[k]]=aosUrl+"CKE/plugins/"+dependencies[k]+"/plugin.js")}CKEplugins[pluginName]=aosUrl+"CKE/plugins/"+pluginName+"/plugin.js"}$(document).ready(function(){aosUrl&&CKEskin&&"default"!==CKEskin&&(CKEDITOR.config.skin=CKEskin+","+aosUrl+"CKE/skins/"+CKEskin+"/"),CKEtemplatesFile&&(CKEDITOR.config.templates_files=[CKEtemplatesFile],CKEDITOR.config.templates="default",CKEDITOR.config.templates_replaceContent=!1),CKEDITOR.config.autoGrow_onStartup=!0,CKEDITOR.config.autoGrow_bottomSpace=20,CKEDITOR.config.autoGrow_maxHeight=700,CKEDITOR.config.codemirror={theme:"material",lineNumbers:!0,indentAuto:!0,lineWrapping:!0},$(".InputfieldCKEditorNormal, .InputfieldCKEditorInline").each(function(){var CKEname=$(this).attr("data-configname"),CKEfield=ProcessWire.config[CKEname];if(!CKEfield||CKEfield.aos)return!0;if(AOSsettings.customCKEScript&&(CKEfield.customConfig=AOSsettings.customCKEScript),-1!==CKEfield.contentsCss.indexOf("/wire/")&&AOSsettings.customCKEStyle&&(CKEfield.contentsCss=AOSsettings.customCKEStyle),CKEenabledFields.length&&-1===CKEenabledFields.indexOf(CKEname.replace("InputfieldCKEditor_","")))return!0;var extraPlugins=enabledCKEplugins.join(",");if(-1!==extraPlugins.indexOf("magicline")){var removedPluginsArr=CKEfield.removePlugins.split(","),index=removedPluginsArr.indexOf("magicline");index>-1&&removedPluginsArr.splice(index,1),CKEfield.removePlugins=removedPluginsArr.join(",")}CKEfield.extraPlugins+=","+extraPlugins,addCKEtoolbars(CKEfield),CKEfield.aos=!0})})}function updateAutoGrowCKE(CKEs){CKEs.length&&CKEs.each(function(i,el){var CKEid=$(el).attr("id").replace("wrap_",""),editor=CKEDITOR.instances[CKEid];editor&&!editor.autogrowFired&&(editor.autogrowFired=!0,editor.execCommand("autogrow"))})}function updateAutoGrowCKE(CKEs){CKEs.length&&CKEs.each(function(i,el){var CKEid=$(el).attr("id").replace("wrap_",""),editor=CKEDITOR.instances[CKEid];editor&&!editor.autogrowFired&&(editor.autogrowFired=!0,editor.execCommand("autogrow"))})}function posTop(){return void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),callNow&&func.apply(context,args)}}function addImageSelectLabels(imageUL){imageUL.children("li").length&&imageUL.addClass("aos-image-titles").children("li").each(function(index,el){var imgName,link=$(el).find("a"),url=link.attr("href");imgTitle=link.find("img").attr("alt")||AOSsettings.loc.untitled,imgName=url.split("&")[0].split(",")[1],link.append('<span class="imageSelectLabel">'+imgTitle+"<small>"+imgName+"</small></span>")})}function setDtTable(table){setColWidths("#"+table.attr("id")),table.find("tbody tr").each(function(){var $tr=$(this),cells=$tr.children("td"),searchStrings=[];$.each(cells,function(i,el){var text=el.innerText||el.textContent||$(el).find("input").val();text&&searchStrings.push(text.trim())}),$tr.attr("data-filter",searchStrings.join(" "))})}function paginateFilteredLister(input,direction){var selector="right"==direction?".MarkupPagerNavNext a":".MarkupPagerNavPrevious a";$(selector).length&&($("body").attr("data-filterbox",$(input).val()),$(selector).first().trigger("click"))}function toggleFilterBoxState(input,on){input.attr("disabled",!on)}function restoreFilterBoxValue(input){var prevValue=$("body").attr("data-filterbox");if(!prevValue)return!1;toggleFilterBoxState(input,!0),input.val(prevValue).trigger("fieldchange").focus(),$("body").removeAttr("data-filterbox")}function setupAdminDataTableFilter(){function updateDtFilterCounter(num,input,total){$(input).siblings(".counter").html("<strong>"+num+"</strong><em>/ "+total+"</em>")}function cleardtFilter(input){input.val("").focus(),input.parent().removeClass("hasValue"),input.trigger("fieldchange")}if($("#modules_form").length)return!1;if($(".AdminDataTable:not(.InputfieldTable)").length){var autofocus=$("#ProcessTemplateList, #ProcessFieldList").length?" autofocus":"";if(0==$("body.AdminThemeUikit").length)dtFilter=$('<div class="Inputfield InputfieldMarkup"><div class="dtFilter filterbox InputfieldContent"><input type="text"'+autofocus+' placeholder="Filter items..." class="ui-input"><i class="fa fa-close"></i><span class="counter"></span></div></div>');else var dtFilter=$('<div class=\'uk-inline filterbox-wrapper uk-grid-margin Inputfield InputfieldMarkup\'><div class="dtFilter filterbox InputfieldContent "><input type="text"'+autofocus+' class=\'uk-input uk-form-width-medium\'><i class="fa fa-close"></i><span class="counter"></span></div></div>');if($(".AdminDataTable").find("tbody tr").length<=1)return!1;$(".AdminDataTable").each(function(){var table=$(this);return!!table.attr("data-dtfilter-added")||(!!table.parents("#ModuleInfo").length||(setDtTable(table),1==$(".AdminDataTable").length?$("body").hasClass("id-1095")?table.parents(".Inputfields").first().prepend(dtFilter.clone()):table.before(dtFilter.clone()):table.parents(".WireTab").length?table.before(dtFilter.clone()):($("body").hasClass("dtFilterAdded")||(table.parents(".Inputfields").first().prepend(dtFilter.clone()),$("body").addClass("dtFilterAdded")),table.parents("#ProcessListerTable").length&&table.parents("#ProcessListerTable").first().prepend(dtFilter.clone())),table.attr("data-dtfilter-added","1"),void(table.parents("form").find("ul.MarkupPagerNav").length&&restoreFilterBoxValue(table.parents("form").find(".dtFilter input")))))}),$(document).on("keydown",".dtFilter input",function(e){var target=(e=e||window.event).target||e.srcElement;27===e.keyCode&&(target.value?setTimeout(function(){cleardtFilter($(target))},0):target.blur())}),$(document).on("click",".dtFilter i",function(e){var target=(e=e||window.event).target||e.srcElement;return cleardtFilter($(target).prev("input")),!1}),$(document).on("keydown",".dtFilter input",function(e){e=e||window.event;var input=$(this),pager=input.parents("form").find(".MarkupPagerNav"),keyCode=e.keyCode||e.charCode||e.which,arrow={left:37,up:38,right:39,down:40};if(e.metaKey||e.ctrlKey)switch(keyCode){case arrow.left:if(e.preventDefault(),pager.find(".MarkupPagerNavPrevious").length)return toggleFilterBoxState(input,!1),paginateFilteredLister(input,"left"),!1;break;case arrow.right:if(e.preventDefault(),pager.find(".MarkupPagerNavNext").length)return toggleFilterBoxState(input,!1),paginateFilteredLister(input,"right"),!1}}),$(document).on("input keyup fieldchange",".dtFilter input",debounce(function(e){var target=(e=e||window.event).target||e.srcElement,filter=target.value.toLowerCase(),field=$(".AdminDataTable"),items=field.find("tbody td"),length=filter.length,invertedSearch=!1;if($("body").hasClass("id-1007")&&(items=(field=$(target).parent().parent().find(".AdminDataTable")).find("tbody td")),!target.value)return updateDtFilterCounter(),$(target).parent().removeClass("hasValue"),$("tr.hidden").removeClass("hidden"),$(".Inputfield.hidden").removeClass("hidden"),!0;if(13==e.keyCode){var visibleRowLinks=$("tbody tr:not(.hidden) a");return visibleRowLinks.length&&visibleRowLinks.first().get(0).click(),!1}if(filter.length>1&&("!"===filter.charAt(0)&&(filter=filter.slice(1),invertedSearch=!0),"!"===filter.charAt(filter.length-1)&&(filter=filter.slice(0,-1),invertedSearch=!0)),length=filter.length,$(target).removeClass("empty"),$(target).parent().addClass("hasValue"),length>0){var filter_tags=filter.split(" ");if(0==filter_tags.length)return!0;items.each(function(){var row=$(this).parent("tr"),itemFilters=row.attr("data-filter"),matches=!0;if(!itemFilters)return setDtTable(field),!1;$.each(filter_tags,function(i,a_filter){var isFilterMatch=itemFilters.toLowerCase().indexOf(a_filter);invertedSearch?-1!==isFilterMatch&&(matches=!1):-1===isFilterMatch&&(matches=!1)}),matches?(row.parents("li.Inputfield.InputfieldStateCollapsed").first().removeClass("InputfieldStateCollapsed"),row.removeClass("hidden")):row.addClass("hidden")})}else row.parents("li.Inputfield.InputfieldStateCollapsed").first().removeClass("InputfieldStateCollapsed"),items.removeClass("hidden");var fieldCount=function(table){return table.parents(".WireTab").length?1:field.length};updateDtFilterCounter(field.find("tbody tr:not(.hidden)").length,target,field.find("tbody tr").length),field.each(function(){var ff=$(this),isAllRowsHidden=0==ff.find("tbody tr:not(.hidden)").length;ff.find("thead tr").toggleClass("hidden",isAllRowsHidden),fieldCount(ff)>1&&ff.parents(".Inputfield").first().toggleClass("hidden",isAllRowsHidden)})},200))}}function setupTranslatorFilter(){function clearTransFilter(input){input.val("").focus(),input.parent().removeClass("hasValue"),$(".Inputfield.hidden").removeClass("hidden")}var transFilter=$('<div class="transFilter filterbox"><input type="text" autofocus><i class="fa fa-close"></i></div>');$("form > .Inputfields > .Inputfield:not(.Inputfield_abandoned_fieldset)").each(function(){var $tr=$(this),cells=$tr.find("p, span, input"),searchStrings=[];$.each(cells,function(i,el){var text=el.innerText||el.textContent||$(el).val();text&&searchStrings.push(text.trim())}),$tr.attr("data-filter",searchStrings.join(" "))}),$("form > .Inputfields").before(transFilter),$(".transFilter input").on("click",function(){$('input[name="untranslated"]').prop("checked",!1),$("li.translated").show()}),$(".transFilter input").on("keydown",function(e){var target=(e=e||window.event).target||e.srcElement;27===e.keyCode&&(target.value?setTimeout(function(){clearTransFilter($(target))},0):target.blur())}),$(".transFilter i").click(function(e){var target=(e=e||window.event).target||e.srcElement;return clearTransFilter($(target).prev("input")),!1}),$(document).on("input keyup fieldchange",".transFilter input",debounce(function(e){var target=e.target||e.srcElement,filter=target.value.toLowerCase(),length=filter.length,items=$("form > .Inputfields").children(".Inputfield:not(.Inputfield_abandoned_fieldset)");if(!target.value)return $(target).parent().removeClass("hasValue"),clearTransFilter($(target)),!0;if($(target).removeClass("empty"),$(target).parent().addClass("hasValue"),length>0){var filter_tags=filter.split(" ");if(0==filter_tags.length)return!0;items.each(function(){var row=$(this),itemFilters=row.attr("data-filter"),matches=!0;$.each(filter_tags,function(i,a_filter){-1===itemFilters.toLowerCase().indexOf(a_filter)&&(matches=!1)}),matches?row.removeClass("hidden"):row.addClass("hidden")})}},200))}function setColWidths(tableSelector){setTimeout(function(){var tab,originalStyle,table=$(tableSelector),isInsideHiddenTab=!1;if(!table.length||0==table.find("th").length)return!1;table.parents(".WireTab").not(":visible").length&&(tab=table.parents(".WireTab").first(),isInsideHiddenTab=!0),isInsideHiddenTab&&(originalStyle=tab.attr("style"),tab.css({position:"absolute",visibility:"hidden",display:"block"})),table.find("th").each(function(){var el=$(this);el.css("width",el.outerWidth()+"px")}),isInsideHiddenTab&&tab.attr("style",originalStyle)},200)}var AOSsettings=AOSsettings||ProcessWire&&ProcessWire.config&&ProcessWire.config.AdminOnSteroids?JSON.parse(ProcessWire.config.AdminOnSteroids):null;if(AOSsettings){var aosUrl=AOSsettings.aosUrl,CKEtemplatesFile=AOSsettings.customCKEtemplates;_isEnabled("CKEaddons")&&ProcessWire.config.InputfieldCKEditor&&($(document).on("reloaded",".InputfieldRepeaterItem, .InputfieldCKEditor",initCKE),initCKE())}_isEnabled("CKEaddons")&&-1!==AOSsettings.CKEaddons_plugins.indexOf("autogrow")&&($(document).on("wiretabclick",function(e,elem){var CKEs=$(elem).find(".InputfieldCKEditor");CKEs.length&&updateAutoGrowCKE(CKEs)}),$(document).on("showInputfield",function(e,elem){$(elem).hasClass("InputfieldCKEditor")&&updateAutoGrowCKE($(elem))})),$(document).ready(function(){function removeNoticeHotkey(e){var keyCode=e.keyCode||e.charCode;return $(document).off("keydown",removeNoticeHotkey),27!==keyCode||!$("a.notice-remove").length||($("a.notice-remove").first().trigger("click"),!1)}function getSaveButton(){var aos_saveButton=!1;if($(".cke_button__maximize.cke_button_on").trigger("click"),window.frameElement&&!$("body").hasClass("modal"))aos_saveButton=$('.ui-dialog-buttonset button[role="button"]',window.parent.document).eq(0);else{var selectors=".aos_hotkeySave, #submit_save_unpublished, form#ProcessTemplateAdd #Inputfield_submit, #submit_publish, #Inputfield_submit_save, #submit_save, #ProcessTemplateEdit #Inputfield_submit, #Inputfield_submit_save_field, #Inputfield_submit_save_module, #submit_save_profile, #save_translations".split(",");$.each(selectors,function(i,selector){var res=$(selector);if(res.length)return aos_saveButton=res,!1}),0===aos_saveButton.length&&(aos_saveButton=$('.ui-dialog-buttonset button[role="button"]').eq(0))}return aos_saveButton}function aos_triggerSave(){if($(".cke_dialog:visible").length&&$(".cke_dialog:visible").find(".cke_dialog_ui_button_ok").length)return aos_saveButton=$(".cke_dialog:visible").find(".cke_dialog_ui_button_ok").first().get(0).click(),!1;var aos_saveButton=getSaveButton();if(aos_saveButton.length){var context=$("html");$("iframe.pw-modal-window",window.parent.document).length&&(context=$("iframe.pw-modal-window",window.parent.document).contents().find("html")),$("body",context).addClass("aos_saving"),$("body",context).addClass("ui-state-disabled"),aos_saveButton.addClass("ui-state-disabled"),setTimeout(function(){aos_saveButton.focus().click()},100)}}function setupCKESave(){window.CKEDITOR&&CKEDITOR.on("instanceReady",function(evt){evt.editor.addCommand("saveCKECommand",{exec:function(editor,data){aos_triggerSave()}}),evt.editor.keystrokeHandler.keystrokes[CKEDITOR.CTRL+83]="saveCKECommand"})}function focusSearchBox(e,blur){var searchBoxValue,searchBox=$("#ProcessPageSearchQuery, .uk-navbar-right .pw-search-form .pw-search-input").first();if(0===searchBox.length&&(searchBox=$("#ProcessPageSearchQuery, .uk-navbar-right .pw-search-form .pw-search-input",window.parent.document)),e&&e.preventDefault(),blur)return searchBox.blur(),$("#search.open").removeClass("open"),!1;searchBox.is(":focus")?searchBox.blur():($("#search").addClass("open"),searchBox.focus(),searchBoxValue=searchBox.val()?searchBox.val().trim():"",searchBox.val("â€‹"+searchBoxValue),searchBox.trigger("keydown"))}function addAsmWidths(){setTimeout(function(){$("#wrap_fieldgroup_fields .asmListItemStatus:not(:contains('%'))").each(function(){$(this).html($(this).html()+"<em> 100%</em>")})},100)}function setSplitterHeight(){!$(".gutter").length||$(".gutter").css("height",0).css("height",$(".gutter").parent().outerHeight())}function initIUC(e){$(IUC.selector).not("["+IUC.dataLoaded+'="1"]').each(function(){var iucLink=$(this);setTimeout(function(){IUC.btnHeight>0&&iucLink.css({height:IUC.btnHeight+"px","line-height":IUC.btnHeight+"px"})},0)}),$(IUC.selector+"["+IUC.dataMode+'!=""]['+IUC.dataMode+"]").not("["+IUC.dataLoaded+'="1"]').each(function(){var mode=$(this).attr(IUC.dataMode),input=$(this).parents(".InputfieldContent").first().find('input:not([type="hidden"])');addButtonMode(e,input),addFieldListener(input),-1!==mode.indexOf("ctrl-shift-click")&&addHotkeyMode(input,"click","ctrl-shift-click"),-1!==mode.indexOf("ctrl-shift-enter")&&addHotkeyMode(input,"keydown","ctrl-shift-enter"),$(this).attr(IUC.dataLoaded,1)})}function addButtonMode(e,obj){obj.parents(".InputfieldContent").first().find(IUC.selector).on("mousedown",function(){var url;return(url=!!$(this).attr("href")&&$(this).attr("href").trim())&&-1===url.indexOf("mailto:")?3==e.which||(2==e.which||4==e.button?(window.open(url.replace("&modal=1","")),!1):void 0):($(this).addClass(IUC.linkHiddenClass),!1)})}function addHotkeyMode(obj,eventName,mode){obj.on(eventName,function(e){var url=$(this).val(),isCtrlShiftPressed=(e.metaKey||e.ctrlKey)&&e.shiftKey,keyCode=e.keyCode||e.charCode,isEnterPressed=10==keyCode||13==keyCode;if(url||""!==url.trim())return"ctrl-shift-enter"===mode&&isCtrlShiftPressed&&isEnterPressed||"ctrl-shift-click"===mode&&isCtrlShiftPressed?(obj.parents(".InputfieldContent").first().find(IUC.selector).get(0).click(),!1):void 0})}function addFieldListener(obj){obj.on("keyup input change fieldchange",function(){var link=obj.parents(".InputfieldContent").first().find(IUC.selector),url=getUrlIUC(obj.val(),link.attr(IUC.dataForceHttp)).trim();url?(link.attr("href",url),link.removeClass(IUC.linkHiddenClass)):(link.attr("href",""),link.addClass(IUC.linkHiddenClass))}),obj.trigger("fieldchange")}function getUrlIUC(url,forcePrefix){return 0===url.indexOf("/")?url:-1!==url.indexOf("mailto:")?"":forcePrefix&&""!=url&&-1===url.indexOf("http")?"http://"+url:url}function getMode(currentMode){var modesArray=Object.keys(titleCases),mode=modesArray[0];return modesArray.indexOf(currentMode)!==modesArray.length-1&&(mode=modesArray[modesArray.indexOf(currentMode)+1]),mode}function toggleCase($input,$toggleBtn){var newValue,string=$input.val(),mode=getMode($toggleBtn.attr("data-case")),pageTitleSelector=$("h1#title > span").length?"h1#title > span":"h1#title";$("body.AdminThemeDefault").length&&(pageTitleSelector=$("#breadcrumbs li.title > span").length?"#breadcrumbs li.title span":"#breadcrumbs li.title"),titleCases[mode]&&(newValue=titleCases[mode](string,$toggleBtn)),newValue&&newValue.length&&($input.val(newValue),"Inputfield_title"==$input.attr("id")&&$(pageTitleSelector).length&&$(pageTitleSelector).contents().filter(function(){return 3==this.nodeType}).first().replaceWith(newValue),$toggleBtn.attr("data-case",mode)),$input.focus()}function checkOrClearCheckboxes(insertAfterSelector,checkboxSelector,formSelector){function batchupdateCheckboxes(e,updateCheckboxes){if(1!==e.which)return!0;setTimeout(function(){var checkedNum=checkboxes.filter("input:checked").length,allNum=checkboxes.length,mode=checkedNum!==allNum;!1!==updateCheckboxes&&checkboxes.each(function(){$(this).prop("checked",mode)}),checkAllBtn.text(checkboxes.filter("input:checked").length===allNum?textClearAll:textCheckAll)},0)}if(!$(insertAfterSelector).length||!$(formSelector).length)return!1;var insertAfterElem=$(insertAfterSelector).first(),form=$(formSelector),checkAllBtn=$('<a href="#" class="checkAllFieldToRemoveBtn">'),checkboxSelector=""===checkboxSelector?'input[type="checkbox"]':checkboxSelector,checkboxes=form.find(checkboxSelector),textCheckAll=AOSsettings.loc.check_all,textClearAll=AOSsettings.loc.clear_all;if(!checkboxes.length||checkboxes.length<=1)return!1;checkAllBtn.text(textCheckAll),$("#abandoned_fieldset").length&&checkAllBtn.addClass("ui-button ui-priority-secondary"),insertAfterElem.after(checkAllBtn),form.on("mouseup","label",function(e){batchupdateCheckboxes(e,!1)}),checkAllBtn.on("mouseup",function(e){batchupdateCheckboxes(e)})}function aos_updateTabIndices(){$("input, textarea, select").each(function(index){$(this).prop("tabindex",index+1)})}function clearModuleFilter(){$(".moduleFilter input").val("").trigger("keypress").parent().removeClass("hasValue"),$("tr.hidden").removeClass("hidden"),$(".modules_section.hidden").removeClass("hidden")}function setupFilterInput(field){var itemSelector=getItemSelector(field);$(filterFieldSelector).length&&(field.addClass("filterbox_loaded").find(".InputfieldHeader").append($filterInput.clone()),field.find(itemSelector).length<2&&field.find(".InputfieldFileFieldFilter").css("display","none"),field.find(".InputfieldFileFieldFilter input").attr("list",field.attr("id")))}function addFilterTargets(field){var searchField=field.find(".InputfieldFileFieldFilter input"),fieldId=field.attr("id").replace("_","").toLocaleLowerCase(),datalistOptions=[],options="";field.find(getItemSelector(field)).each(function(){var listItemName,listItem=$(this),searchStrings=[];""!==listItem.find(".InputfieldImageEdit__name").text()&&searchStrings.push(listItem.find(".InputfieldImageEdit__name").text()),listItem.find(".InputfieldFileName").length&&(listItemName=listItem.find(".InputfieldFileName"),searchStrings.push(listItemName.text()),searchStrings.push(listItemName.attr("title"))),searchStrings.push(listItem.find("img").attr("src"));var inputs=listItem.find('input[type="text"]:not(.InputfieldFileSort)');$.each(inputs,function(el){inputs[el].value&&searchStrings.push(inputs[el].value.trim())}),listItem.attr("data-filter",searchStrings.join(" ")),datalistOptions.push(searchStrings)}),$.each(datalistOptions,function(index,item){options+='<option value="'+item[0]+'"></option>'}),field.find("datalist#"+fieldId).length?field.find("datalist#"+fieldId).empty().append(options):(field.append('<datalist id="'+fieldId+'">'+options+"</datalist>"),searchField.attr("list",fieldId))}function clearFilterbox(inputField){setTimeout(function(){inputField.val(""),inputField.trigger("keypress").focus(),inputField.parent("span").removeClass("hasValue")},0)}if(null!=AOSsettings){if($("html.AdminThemeReno.headStickyCompact:not(.headBtnToTitle):not(.modal)").length){var saveBtnWidth=$("#Inputfield_submit_save_module_copy").outerWidth();saveBtnWidth&&0!=saveBtnWidth&&$("#search").attr("style","right: "+(saveBtnWidth+120+24)+"px !important")}if($('html.themeConfigLinks [id^="Inputfield_admin_theme_"]').each(function(){var $label=$(this).parent("label"),theme=$(this).attr("id").slice(23),themeConfigUrl=ProcessWire.config.urls.admin+"module/edit?name="+theme;$label.after('<a href="'+themeConfigUrl+'" class="themeConfigLink" target="_blank"><i class="fa fa-cog"></a>')}),$("h1#title").length&&($("h1#title > span").length?pageTitle=$("h1#title > span")[0].innerText:(pageTitle=$("h1#title").text(),$("h1#title").wrapInner("<span>")),pageTitle&&pageTitle.length>64&&$("h1#title").attr("title",pageTitle)),_isEnabled("FieldAndTemplateEditLinks")){var templateEditSettingsElem=$("#ProcessPageEdit select#template"),templateEditSettingsLink='<a href="#" class="pw-modal aos-template-edit-settings"><i class="fa fa-pencil-square-o"></i></a>';templateEditSettingsElem.length?templateEditSettingsElem.after(templateEditSettingsLink):(templateEditSettingsElem=$('body[class*="ProcessPageEdit-template-"] #wrap_Inputfield__pw_page_name').next("li.Inputfield").find("i.fa-cubes").parent().parent().find(".InputfieldContent p")).append(templateEditSettingsLink),$(document).on("hover",".aos-template-edit-settings",function(){var editLink=$(this);editLink.prev("select").length?editLink.attr("href",ProcessWire.config.urls.admin+"setup/template/edit?id="+editLink.prev("select").val()):$(".aos_EditTemplate").length&&editLink.attr("href",$(".aos_EditTemplate").attr("href"))}),$("ul.nav li.title").wrapInner("<span>"),$(document).on("mousedown",".Inputfield .aos_EditField",function(e){var editFieldLink=$(this).parents(".Inputfield").eq(0).find(".aos_EditFieldLink");return 3!=e.which&&(editFieldLink.length?(2==e.which||4==e.button?window.open(editFieldLink.attr("href").replace("&modal=1","")):editFieldLink[0].click(),!1):void 0)}),$(".Inputfield:not(.InputfieldPageListSelect)").on("reloaded",function(){var field=$(this),label=field.children("label");if(label.length&&0===label.find("span").length){field.addClass("aos_hasTooltip");var fieldName=label.parent().find(".InputfieldContent .aos_EditFieldLink").attr("data-field-name");if(!fieldName)return;label.contents().eq(0).wrap('<span class="title">'),field.find("span.title").append('<em class="aos_EditField">'+fieldName+' <i class="fa fa-pencil"></i></em>')}})}if(_isEnabled("FocusInputOnLangTabSwitch")&&$(document).on("ready reloaded wiretabclick",function(e){var AAFsettings=AOSsettings.FocusInputOnLangTabSwitch,AAFsettingsCKE=AOSsettings.FocusInputOnLangTabSwitchCKE;$(".langTabs").on("tabsactivate",function(e,ui){var inputs=ui.newPanel.get(0).querySelectorAll("input, textarea");if(inputs.length){var settings,input=inputs[0];if($(input).hasClass("InputfieldCKEditorNormal")){var ckeLoaded=!1,ckEditor_id=ui.newPanel.selector.replace("#langTab_",""),editor=CKEDITOR.instances[ckEditor_id];settings=AAFsettingsCKE,editor&&("1"==input.getAttribute("data-cke-loaded")?ckeLoaded=!0:input.setAttribute("data-cke-loaded","1"),setTimeout(function(){if("focus"==settings)editor.focus();else if("moveEnd"==settings){editor.focus();var element=editor.document.getBody(),range=editor.createRange();range&&(range.moveToElementEditablePosition(element,!0),range.select())}else"selectAll"==settings&&editor.execCommand("selectAll")},ckeLoaded?0:300))}else"focus"==(settings=AAFsettings)?input.focus():"moveEnd"==settings?(input.focus(),input.selectionStart=input.selectionEnd=input.value.length):"selectAll"==settings&&input.select()}})}),_isEnabled("Hotkeys")){var HotkeysSettings=AOSsettings.Hotkeys,BreadcrumbsSettings=ProcessWire.config.AOS_breadcrumbs;$(document).on("keydown",function(e){var panelCloseBtn=$(".pw-panel-container-open a.pw-panel-button-open",window.parent.document);if(panelCloseBtn.length&&27===(e.keyCode||e.charCode))return e.preventDefault(),panelCloseBtn.get(0).click(),window.parent.document.body.focus(),!1}),-1!==HotkeysSettings.indexOf("filterboxHotkey")&&$(document).on("keydown",function(e){var filterbox=$("html .filterbox");if(filterbox.length){var keyCode=e.keyCode||e.charCode;if(e.altKey&&83===keyCode)return e.preventDefault(),filterbox.find("input").focus(),!1}}),-1!==HotkeysSettings.indexOf("addPageTreeTrigger")&&(window.CKEDITOR&&CKEDITOR.on("instanceReady",function(evt){-1!==HotkeysSettings.indexOf("addPageTreeTrigger")&&(evt.editor.addCommand("pageTreeTrigger",{exec:function(editor,data){aos_togglePageTreePanel()}}),evt.editor.keystrokeHandler.keystrokes[CKEDITOR.ALT+79]="pageTreeTrigger")}),$(document).on("keydown",function(e){var keyCode=e.keyCode||e.charCode,pageTreePanelBtn=$('a.pw-panel[data-tab-icon="sitemap"], .uk-breadcrumb a.pw-panel').first();0===pageTreePanelBtn.length&&(pageTreePanelBtn=$('a.pw-panel[data-tab-icon="sitemap"], .uk-breadcrumb a.pw-panel',window.parent.document)),pageTreePanelBtn.length&&e.altKey&&79===keyCode&&pageTreePanelBtn.get(0).click()})),HotkeysSettings.indexOf("removeNoticeHotkey")&&$("a.notice-remove").length&&$(document).on("keydown",removeNoticeHotkey),-1!==HotkeysSettings.indexOf("breadcrumbTweaks")&&BreadcrumbsSettings&&($('#breadcrumbs a:not(.pw-panel):not([href="#"])').each(function(i){if(!BreadcrumbsSettings[i])return!0;BreadcrumbsSettings[i].url&&$(this).attr("data-url",BreadcrumbsSettings[i].url),BreadcrumbsSettings[i].editUrl&&$(this).attr("data-editurl",BreadcrumbsSettings[i].editUrl)}),$("#breadcrumbs").on("longclick","a",function(e){if($(this).attr("data-url")){e.preventDefault();var url=$(this).attr("data-url");window.open(url)}}),$("#breadcrumbs").on("click","a",function(e){if((e.metaKey||e.ctrlKey)&&$(this).attr("data-editurl")){e.preventDefault();var url=$(this).attr("data-editurl");window.location=url}})),-1!==HotkeysSettings.indexOf("save")&&($(document).on("keydown",function(e){var keyCode=e.keyCode||e.charCode;(e.metaKey||e.ctrlKey)&&83===keyCode&&(aos_triggerSave(),e.preventDefault())}),setupCKESave(),$(document).on("reloaded",".InputfieldRepeaterItem",function(){setupCKESave()})),-1!==HotkeysSettings.indexOf("focusSearch")&&(window.CKEDITOR&&CKEDITOR.on("instanceReady",function(evt){-1!==HotkeysSettings.indexOf("focusSearch")&&(evt.editor.addCommand("focusSearchBox",{exec:function(editor,data){focusSearchBox()}}),evt.editor.keystrokeHandler.keystrokes[CKEDITOR.ALT+68]="focusSearchBox")}),$(document).on("keydown",function(e){var keyCode=e.keyCode||e.charCode;if(27===keyCode)return focusSearchBox(e,!0),!1;e.altKey&&68===keyCode&&focusSearchBox(e)}))}if(_isEnabled("AsmTweaks")){var AsmTweaksSettings=AOSsettings.AsmTweaks;-1!==AsmTweaksSettings.indexOf("asmCollapse")&&$(document).on("dblclick",".asmFieldset",function(){var asmItem=$(this);asmItem.hasClass("asmFieldsetStart")?(asmItem.toggleClass("collapsed"),asmItem.nextUntil(".asmFieldsetStart").slideToggle(200)):(asmItem.prevAll(".asmFieldsetStart").eq(0).toggleClass("collapsed"),asmItem.prevUntil(".asmFieldsetStart").add(asmItem).slideToggle(200))}),-1!==AsmTweaksSettings.indexOf("editFieldWidth")&&$("body").hasClass("id-11")&&($(document).on("hover","#wrap_fieldgroup_fields .asmList:not(.editFieldWidth)",function(){$(this).addClass("editFieldWidth")}),$(document).on("reloaded",function(){addAsmWidths()}),$(document).on("click","#wrap_fieldgroup_fields .asmListItemStatus",function(){var editLink=$(this).siblings(".asmListItemEdit").first().find("a"),originalUrl=editLink.attr("href");editLink.attr("href",editLink.attr("href")+"#inputfieldConfig").trigger("click"),setTimeout(function(){editLink.length&&editLink.attr("href",originalUrl)},250)}),addAsmWidths(),$(document).on("pw-modal-closed",function(){$(document).trigger("reloaded")})),-1!==AsmTweaksSettings.indexOf("fieldMiddleEdit")&&$(document).on("mousedown",'.asmList a[href*="/field/edit?"]',function(e){e=e||window.event;var link=$(this),linkClone=link.clone(!0);if(2===e.which){link.unbind("click");var editFieldUrl=link.attr("href").split("&fieldgroup_id")[0],fieldName=link.contents().first()[0].textContent;link.removeAttr("href"),window.open(editFieldUrl,fieldName),window.focus(fieldName),setTimeout(function(){link.replaceWith(linkClone)},300)}return!1})}if(_isEnabled("LongClickDuration")&&jQuery&&jQuery.longclick&&AOSsettings.LongClickDuration&&(jQuery.longclick.duration=parseInt(AOSsettings.LongClickDuration)),_isEnabled("Misc")){if(-1!==AOSsettings.Misc.indexOf("prevNextLinks")){var PrevNextLinks=ProcessWire.config.AOS_prevnextlinks;if(PrevNextLinks){var $targetElement=$("h1, li.title span, li.title").first();$targetElement.length&&(PrevNextLinks.prev&&$targetElement.append('<a href="'+PrevNextLinks.prev.url+'" title="'+PrevNextLinks.prev.title+'" class="aos-edit-prev"><i class="fa fa-angle-left"></i></a>'),PrevNextLinks.next&&$targetElement.append('<a href="'+PrevNextLinks.next.url+'" title="'+PrevNextLinks.next.title+'" class="aos-edit-next"><i class="fa fa-angle-right"></i></a>'))}}if(-1!==AOSsettings.Misc.indexOf("adminColumns")){if(window.Split&&$(".aos_col_left ~ .aos_col_right").length)var storageName=$(".aos_col_right").attr("data-splitter-storagekey"),defaultLeft=parseFloat($(".aos_col_left").attr("data-splitter-default")),defaultRight=parseFloat($(".aos_col_right").attr("data-splitter-default")),sizes=localStorage.getItem(storageName)||[defaultLeft,defaultRight],aos_splitter=Split([".aos_col_left",".aos_col_right"],{sizes:"string"==typeof sizes?JSON.parse(sizes):sizes,gutterSize:12,minSize:250,onDragEnd:function(){localStorage.setItem(storageName,JSON.stringify(aos_splitter.getSizes())),setSplitterHeight()}});$(window).on("load",function(){setTimeout(function(){setSplitterHeight()},2e3)}),$(document).on("dblclick",".aos_col_left + .gutter",function(e){if(!aos_splitter)return!0;aos_splitter.setSizes([defaultLeft,defaultRight]),localStorage.removeItem(storageName)}),$(window).on("resize",function(){setSplitterHeight()}),$("#ProcessPageEdit li[data-column-break]").length&&$(document).on("wiretabclick",function(e,elem){var tabName=elem.attr("id").replace("Inputfield_",""),tabSelector="#Inputfield_"+tabName,tabColumnBreaks=$("#ProcessPageEdit li[data-column-break]").attr("data-column-break");if($(tabSelector).hasClass("aos-columns-ready"))return!1;if(tabColumnBreaks&&(tabColumnBreaks=JSON.parse(tabColumnBreaks)),tabColumnBreaks[tabName]){if(!tabColumnBreaks[tabName][0])return!1;var breakField=$("#wrap_Inputfield_"+tabColumnBreaks[tabName][0]),colWidth=tabColumnBreaks[tabName][1]?tabColumnBreaks[tabName][1]:67;if(!breakField.length)return!1;var aosColBreakIndex=breakField.index()+1;$(tabSelector+" > .Inputfields > li:lt("+aosColBreakIndex+")").wrapAll('<li class="InputfieldFieldsetOpen aos_col_left" style="width: '+colWidth+'%;"><div class="InputfieldContent"><ul class="Inputfields">'),$(tabSelector+" > .Inputfields > .aos_col_left ~ li").wrapAll('<li class="InputfieldFieldsetOpen aos_col_right" style="width: '+(100-colWidth)+'%;"><div class="InputfieldContent"><ul class="Inputfields">'),$(tabSelector).addClass("aos-columns-ready")}})}-1!==AOSsettings.Misc.indexOf("autosizeTextareas")&&($(document).on("ready reloaded wiretabclick",function(e){var autosizeTextareas=(e.target||e.srcElement).querySelectorAll("textarea");window.autosize&&autosizeTextareas.length&&(autosize.update(autosizeTextareas),autosize(autosizeTextareas))}),$(document).on("tabsactivate",".langTabs",function(e,ui){var textareas=ui.newPanel.get(0).querySelectorAll("textarea");textareas.length&&window.autosize&&window.autosize.update&&autosize.update(textareas)}))}if(_isEnabled("InputfieldURLChecker")){var IUC={selector:"a.iuc",linkHiddenClass:"iuc-hide",lockedClass:"iuc-locked-link",dummyFieldSelector:"IUC-dummy",dataMode:"data-iuc-mode",dataTarget:"data-iuc-target",dataForceHttp:"data-iuc-force-http",dataLoaded:"data-iuc-loaded"};$("body").append('<input class="'+IUC.dummyFieldSelector+'">'),IUC.btnHeight=$("."+IUC.dummyFieldSelector).outerHeight()-2,$("."+IUC.dummyFieldSelector).remove(),$(document).on("ready reloaded wiretabclick opened",initIUC),$(document).on("mousedown","a.InputfieldTableAddRow",initIUC),$(document).on("pw-modal-closed",function(){$('.iuc ~ input:not([type="hidden"])').trigger("fieldchange")})}if(_isEnabled("DeselectRadios")){var ADRsettings=AOSsettings.DeselectRadios,$radioButtons=$("input:radio");$radioButtons.filter(":checked").data("chk",!0),$radioButtons.click(function(){if(-1===ADRsettings.indexOf("allowRequired")&&$(this).parents(".InputfieldStateRequired").length)return!0;$("input[name='"+$(this).attr("name")+"']:radio").not(this).removeData("chk"),$(this).data("chk",!$(this).data("chk")),$(this).prop("checked",$(this).data("chk"))})}if(_isEnabled("Tooltips")&&$(document).on("dblclick","html.tooltipDesc #content p.description, html.tooltipNotes #content p.notes",function(){$(this).toggleClass("tooltip-active")}),_isEnabled("PageListThumbs")&&$(document).on("mousedown","a.aos_pageListLink",function(e){return 1===(e=e||window.event).which?(window.location=$(this).attr("href"),!1):2===e.which?(window.open($(this).attr("href")),!1):void 0}),_isEnabled("PageListTweaks")&&(-1!==AOSsettings.PageListTweaks.indexOf("pListShowExtras")&&$(document).on("hover",".PageListItem",function(){var $extrasToggle=$(this).find(".clickExtras"),$templateEditAction=$(this).find(".PageListActionEdit ~ .PageListActionEdit");$extrasToggle.length&&($extrasToggle.trigger("click").remove(),$(this).find(".PageListActionExtras").length&&$(this).find(".PageListActionExtras").remove(),$templateEditAction.length&&$templateEditAction.parent().append($templateEditAction))}),-1!==AOSsettings.PageListTweaks.indexOf("pListIconOnly")&&$(document).on("hover",".PageListActions a:not([title]), .PageListerActions a:not([title])",function(){$(this).attr("title",$(this).text())}),-1!==AOSsettings.PageListTweaks.indexOf("pListMiddleClick")&&$(document).on("mousedown",".PageListPage, .actions_toggle",function(e){if(2==e.which||4==e.button){var targetLink,clickedElement=$(this);return targetLink=e.metaKey||e.ctrlKey?clickedElement.parent().find(".PageListActionEdit a, .PageEdit"):clickedElement.parent().find(".PageListActionView a, .PageView"),clickedElement.css("pointer-events","none"),targetLink.length>0&&window.open(targetLink.attr("href")),setTimeout(function(){clickedElement.length&&clickedElement.css("pointer-events","")},200),!1}return!0}),-1!==AOSsettings.PageListTweaks.indexOf("pListUnselect")&&($(document).on("pageSelected",function(e,obj){var clearButton=obj.a.parents(".InputfieldPageListSelect").first().find("button.clear"),restoreButton=obj.a.parents(".InputfieldPageListSelect").first().find("button.restore");0!==obj.id?clearButton.removeClass("empty"):clearButton.addClass("empty"),restoreButton.removeClass("empty").removeClass("initial")}),$(document).on("click",".aos_pagelist_unselect",function(){var button=$(this),parentEl=button.parent(),input=button.parent().find("input"),titleElem=button.parent().find(".PageListSelectName");return button.hasClass("clear")?(input.removeAttr("value"),titleElem.html(""),button.addClass("empty"),parentEl.find('button.restore[data-value-original!=""]').removeClass("empty"),parentEl.find("button.restore").removeClass("initial")):(input.val(button.attr("data-value-original")),titleElem.html(button.attr("data-title-original")),button.addClass("empty"),parentEl.find("button.clear").removeClass("empty")),parentEl.find(".PageListItemOpen").length&&parentEl.find("a.PageListSelectActionToggle").trigger("click"),input.trigger("change"),!1}))),_isEnabled("Misc")){if(-1!==AOSsettings.Misc.indexOf("langTabHotkeySwitcher")){var languagesCount=$(".ui-tabs-nav").eq(0).children("li").length;!function(){function switchLangCKE(ckeID){CKEDITOR.instances[ckeID].on("contentDom",function(){var editable=this.editable();editable.attachListener(editable,"keydown",function(e){function activateLangTab(index){langTabs.tabs("option","active",index),langTabs.find("input, textarea").eq(index).focus();var currentCKEinsanceId=langTabs.find("li").eq(index).find("a").attr("href").replace("#langTab_","");setTimeout(function(){CKEDITOR.instances[currentCKEinsanceId].focus()},200),switchLangCKE(currentCKEinsanceId)}var index,langTabs=$("#"+ckeID).closest(".langTabs");return e.data.getKeystroke()==CKEDITOR.CTRL+37?(index=langTabs.find("ul .ui-tabs-active").index()-1,index=getIndex(index,"down"),activateLangTab(index)):e.data.getKeystroke()==CKEDITOR.CTRL+39?(index=langTabs.find("ul .ui-tabs-active").index()+1,index=getIndex(index,"up"),activateLangTab(index)):void 0})})}var getIndex=function(index,direction){return"down"===direction?index<0?languagesCount-1:index:index>languagesCount-1?0:index};$(".InputfieldCKEditor.hasLangTabs").length&&$(".InputfieldCKEditor.hasLangTabs").each(function(){var ckeInstanceId=$(this).find("textarea.FieldtypeTextareaLanguage.InputfieldCKEditorLoaded").eq(0).attr("id");ckeInstanceId&&switchLangCKE(ckeInstanceId)}),$(document).on("keydown",".LanguageSupport input, .LanguageSupport textarea",function(e){function activateLangTab(index){langTabs.tabs("option","active",index),inputs.eq(index).focus()}var index,keyCode=(e=e||window.event).keyCode||e.which,arrow={left:37,up:38,right:39,down:40},langTabs=$(this).closest(".langTabs"),inputs=langTabs.find("input, textarea");if(e.metaKey||e.ctrlKey)switch(keyCode){case arrow.left:return e.preventDefault(),langTabs.hasClass("ui-tabs")?(index=langTabs.find("ul .ui-tabs-active").index()-1,index=getIndex(index,"down"),activateLangTab(index)):(index=getIndex(inputs.index($(this))-1,"down"),inputs.eq(index).focus());case arrow.right:return e.preventDefault(),langTabs.hasClass("ui-tabs")?(index=langTabs.find("ul .ui-tabs-active").index()+1,index=getIndex(index,"up"),activateLangTab(index)):(index=getIndex(inputs.index($(this))+1,"up"),inputs.eq(index).focus());case arrow.up:case arrow.down:return e.preventDefault(),langTabs.parents(".hasLangTabs").addClass("hasLangTabs_"),langTabs.parents(".hasLangTabs_").find(".langTabsToggle").trigger("click"),langTabs.hasClass("ui-tabs")?(index=langTabs.find("input, textarea").index($(this)),activateLangTab(index)):this.focus()}})}(),$(".hasLangTabs").addClass("hasLangTabs_")}if(-1!==AOSsettings.Misc.indexOf("titleCaseToggle")&&$('[id^="Inputfield_title"]').length){var titleCases={original:function(string,$btn){return $btn.attr("data-original")},"Lorem ipsum":function(string){return string.charAt(0).toUpperCase()+string.slice(1).toLowerCase()},"Lorem Ipsum":function(string){return string.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},"LOREM IPSUM":function(string){return string.toLocaleUpperCase()},"lorem ipsum":function(string){return string.toLocaleLowerCase()}};$('[id^="Inputfield_title"]').each(function(){var $input=$(this),dataOriginal="";$input.on("caseChange",function(e,$toggleBtn){toggleCase($input,$toggleBtn)}),$input.on("keyup",function(){$input.prev("a.case-toggle").length&&$input.prev("a.case-toggle").attr("data-original",$input.val())}),$input.val().length&&(dataOriginal=' data-original="'+$input.val()+'"'),$(this).before('<a class="case-toggle" data-case="original"'+dataOriginal+'><i class="fa fa-font"></i><i class="fa fa-font"></i></a>')}),$(document).on("click",".case-toggle",function(){var $toggleBtn=$(this),$input=$(this).parent().find('[id^="Inputfield_title"]');return $input.length&&($input.val()||$toggleBtn.attr("data-original",$input.val()),$input.trigger("caseChange",[$toggleBtn])),!1})}if(-1!==AOSsettings.Misc.indexOf("addOrRemoveFieldsTweaks")){var addOrRemoveFieldSelects=$('form[action*="./send-templates-save?id="] select');if(addOrRemoveFieldSelects.length>1){var btn=$('<a href="#" class="addOrRemoveApplyButton" title="'+AOSsettings.loc.apply_to_all+'"><i class="fa fa-server" aria-hidden="true"></i></a>');addOrRemoveFieldSelects.first().after(btn),btn.on("click",function(){var selectedValue=$(this).prev("select").val();return addOrRemoveFieldSelects.each(function(){$(this).find("option[value="+selectedValue+"]").length&&$(this).val(selectedValue)}),!1}),addOrRemoveFieldSelects.on("change",function(){$(this).after(btn)})}else if(1===addOrRemoveFieldSelects.length){var select=addOrRemoveFieldSelects.first();select.attr("size",select.find("option, optgroup").length)}$('form[action*="./send-templates-save?id="] input[type="checkbox"]').length&&checkOrClearCheckboxes("#Inputfield_submit","",'form[action*="./send-templates-save?id="]'),$("#Inputfield_submit_remove_fields").length&&checkOrClearCheckboxes("#Inputfield_submit_remove_fields",'input[name="remove_fields[]"]','form[action="removeFields"]'),$("#abandoned_fieldset").length&&checkOrClearCheckboxes("#abandoned_fieldset .description",'#abandoned_fieldset input[type="checkbox"]',"form#InputfieldForm2")}if(-1!==AOSsettings.Misc.indexOf("homeOpenNewTab")){var homeIcon=$("body").hasClass("AdminThemeDefault")?"fa-eye":"fa-home";try{$("#topnav i."+homeIcon).parent("a").attr("target","_blank")}finally{}}if(-1!==AOSsettings.Misc.indexOf("dataTableFilter")&&(setupAdminDataTableFilter(),$(document).on("loaded opened reloaded wiretabclick",function(){setupAdminDataTableFilter()})),-1!==AOSsettings.Misc.indexOf("adminLangSwitcher")&&$(".aos_adminLangSwitcher").length){var langSwitcher=$(".aos_adminLangSwitcher");$("body").hasClass("AdminThemeReno")?langSwitcher.prependTo("#topnav"):$("body").hasClass("AdminThemeUikit")?langSwitcher.prependTo(".pw-user-nav"):(langSwitcher.appendTo("#topnav"),$(".aos_adminLangSwitcher > a").append($(".aos_adminLangSwitcher > a + ul"))),langSwitcher.removeAttr("style"),langSwitcher.on("click","a[data-lang-id]",function(){var lang_id=$(this).attr("data-lang-id");document.cookie="aos_lang_id="+lang_id+";expires=0;path=/"})}if(-1!==AOSsettings.Misc.indexOf("transFilter")&&$('form[action*="?textdomain="]').length&&setupTranslatorFilter(),-1!==AOSsettings.Misc.indexOf("noAnim")&&($.fx.off=!0),-1!==AOSsettings.Misc.indexOf("hoverDropdown")&&($(".pw-dropdown-toggle-click").removeClass("pw-dropdown-toggle-click"),$(".dropdown-toggle-click").removeClass("dropdown-toggle-click"),$(".pw-button-dropdown.pw-dropdown-menu").attr("data-my","right top").attr("data-at","right bottom+1"),$(".pw-button-dropdown.dropdown-menu").attr("data-my","right top").attr("data-at","right bottom+1")),-1!==AOSsettings.Misc.indexOf("iconsFilter")&&$(".InputfieldIconAll").length){$(".InputfieldIconAll").before('<input id="icons-filter" class="hidden" placeholder="&#128269">');var $filterIcons,hasParentSpan,prev_value;$("a.InputfieldIconShowAll").click(function(){$filterIcons=!1,$("#icons-filter").toggleClass("hidden").val("").focus()}),$("#icons-filter").on("input keydown",function(e){var filter_value=$(this).val().trim().toLowerCase().replace(" ",""),keyCode=e.keyCode||e.charCode||e.which;if($filterIcons||($filterIcons=$(".InputfieldIconAll").children(),hasParentSpan=$filterIcons.first().is("span")),13===keyCode){e.preventDefault();var $filterIconsVisible=$filterIcons.not(".hidden");return $filterIconsVisible.length&&$filterIconsVisible.first().trigger("click"),$("#icons-filter").focus(),!1}filter_value!==prev_value&&(prev_value=filter_value,$filterIcons.removeClass("hidden"),filter_value&&(hasParentSpan?$filterIcons.not(":has([title*="+filter_value+"])").addClass("hidden"):$filterIcons.not("[title*="+filter_value+"]").addClass("hidden")))})}-1!==AOSsettings.Misc.indexOf("tabIndex")&&($(document).on("ready opened reloaded",function(){aos_updateTabIndices()}),$(document).on("reloaded",".InputfieldRepeater",function(){aos_updateTabIndices()}),$(document).on("click","a.InputfieldTableAddRow",function(){aos_updateTabIndices()}))}if($(document).on("mousedown","a.aos-pagelist-confirm",function(e){if(e.preventDefault(),3===e.which||2===e.which)return!1;var linkTextDefault,link=$(this),url=link.attr("href");if(!link.attr("data-text-original")){var currentText=$(this).get(0).childNodes[1]?$(this).get(0).childNodes[1].nodeValue:$(this).html();link.attr("data-text-original",currentText),(link.hasClass("PageListActionDelete")||link.hasClass("PageDelete"))&&link.attr("data-text-confirm",AOSsettings.loc.permanent_delete_confirm)}if(-1===url.indexOf("&force=1")){var linkCancel;if(linkTextDefault=link.attr("data-text-original"),link.hasClass("cancel"))return linkCancel=link.next("a"),linkCancel.removeClass("cancel").attr("href",link.attr("href").replace("&force=1","")).contents().last()[0].textContent=linkTextDefault,link.replaceWith(linkCancel),!1;linkTextDefault=link.attr("data-text-confirm")?link.attr("data-text-confirm"):link.attr("data-text-original"),(linkCancel=link.clone(!0)).addClass("cancel").contents().last()[0].textContent=" "+AOSsettings.loc.cancel,link.contents().last()[0].textContent=linkTextDefault,link.attr("href",link.attr("href")+"&force=1"),link.before(linkCancel)}return!1}),_isEnabled("ListerTweaks")&&$("html").hasClass("listerHoverBtn")&&$(document).on("mousedown",".PageExtras",function(){$(this).parents("td").find(".actions_toggle").trigger("click")}),_isEnabled("ModuleTweaks")){if(-1!==AOSsettings.ModuleTweaks.indexOf("moduleModal")){$("#modules_form td > a").addClass("pw-modal pw-modal-large pw-modal-longclick").attr("data-autoclose","#Inputfield_submit_save_module.needsReload, #Inputfield_submit_save_module_forceClose, #Inputfield_submit_save_module_forceCloseRefresh").attr("data-buttons","#Inputfield_submit_save_module, #Inputfield_submit_save_module_forceClose, #Inputfield_submit_save_module_forceCloseRefresh");var submitBtn=$("#ModuleEditForm button#Inputfield_submit_save_module");if(window.frameElement&&submitBtn.length&&$("body.modal").length){var submitBtnClone=submitBtn.clone(!1),submitBtnCloneRefresh=submitBtnClone.clone(),loc=AOSsettings.loc;submitBtn.children(".ui-button-text").html(loc.save),submitBtnClone.attr("id",submitBtn.attr("id")+"_forceClose").addClass("ui-priority-secondary").appendTo(submitBtn.parent()).children(".ui-button-text").html(loc.save_and_exit).before('<i class="fa fa-fw fa-close"></i>'),submitBtnCloneRefresh.attr("id",submitBtn.attr("id")+"_forceCloseRefresh").addClass("ui-priority-secondary").appendTo(submitBtn.parent()).children(".ui-button-text").html(loc.save_and_reload).before('<i class="fa fa-fw fa-refresh"></i>'),submitBtnClone.on("click",function(){$("input#uninstall").is(":checked")&&($(this).addClass("needsReload"),$("body",window.parent.document).addClass("needsReload"))}),submitBtnCloneRefresh.on("click",function(){$("body",window.parent.document).addClass("needsReload")})}$("#modules_form td > a").on("pw-modal-closed",function(event,ui){$("body").hasClass("needsReload")&&location.reload()}),$(document).on("pw-modal-opened",function(event,ui){setTimeout(function(){ui.event.currentTarget&&ui.event.currentTarget.contentWindow&&ui.event.currentTarget.contentWindow.focus()},250)}),$(document).on("keydown",function(e){e=e||window.event;var closeBtn=$(".ui-dialog-titlebar-close");27===e.keyCode&&closeBtn.length&&closeBtn.trigger("click")})}if(-1!==AOSsettings.ModuleTweaks.indexOf("flatModules")){if($("html.flatModules body.id-21").length){var modulesArray=[],addNewBtn='<button type="button" id="add_new_button" class="ui-button ui-widget ui-corner-all ui-state-default ui-priority-secondary"><span class="ui-button-text"><i class="fa fa-plus-circle"></i> '+AOSsettings.loc.add_new+"</span></button>",addNewBlock=$("#tab_new_modules"),addNewBlockInput=addNewBlock.find("input:eq(0)"),mainBlock=$("#tab_site_modules"),moduleFilter=$(".moduleFilter");$("#reset_modules").parent().prepend(addNewBtn),$(document).on("click","#add_new_button",function(e){var btn=$(this);return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),btn.hasClass("active")?(btn.removeClass("active"),moduleFilter.length&&moduleFilter.show(),btn.find("i").removeClass("fa-minus-circle").addClass("fa-plus-circle"),mainBlock.after(addNewBlock)):(btn.addClass("active"),mainBlock.before(addNewBlock),moduleFilter.length&&moduleFilter.hide(),btn.find("i").addClass("fa-minus-circle").removeClass("fa-plus-circle"),addNewBlockInput.focus()),!1}),$("#modules_form p.detail").each(function(){$(this).appendTo("#modules_form")}),$("body").removeClass("hasWireTabs"),$("#modules_form tbody tr").each(function(){var moduleName,moduleLink,row=$(this);if(row.parent("thead").length)return!0;(moduleName=(moduleLink=row.find('a[href*="?name="]')).length?moduleLink.attr("href").split("?name=")[1].trim():(moduleLink=row.find('td:first-child > a[href="#"]')).find("span").attr("data-name"))||(moduleName=row.children("td").first().find("a").first().clone().children().remove().end().text().trim()),-1===modulesArray.indexOf(moduleName)&&(modulesArray.push(moduleName),row.attr("data-aos-name",moduleName))}),modulesArray.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}),$.each(modulesArray,function(i){$('#modules_form tr[data-aos-name="'+modulesArray[i]+'"]').appendTo("#modules_form .AdminDataTable:eq(0) tbody")})}-1!==window.location.href.indexOf("module/?new")&&setTimeout(function(){$("#add_new_button").trigger("click")},0)}if(-1!==AOSsettings.ModuleTweaks.indexOf("moduleCompact")&&$("form#modules_form > .Inputfields > .Inputfield").each(function(){var tab=$(this),tbody=tab.find("tbody").first();tab.find("tbody tr").each(function(){$(this).appendTo(tbody)}),tab.find(".modules_section:gt(0)").remove()}),-1!==AOSsettings.ModuleTweaks.indexOf("moduleFilter")){var hiddenStyle=-1!==window.location.href.indexOf("module/?new")?' style="display: none"':"";moduleFilter=0!=$("body.AdminThemeUikit").length?$('<div class="filterbox-wrapper Inputfield"><div class="moduleFilter filterbox InputfieldContent "'+hiddenStyle+'><input type="text" autofocus placeholder="Filter modules below" class="uk-input uk-form-width-medium"><i class="fa fa-close"></i><span class="counter"></span></div></div>'):$('<div class="moduleFilter filterbox"'+hiddenStyle+'><input type="text" autofocus><i class="fa fa-close"></i></div>'),$("#modules_form").length&&($("#modules_form table").each(function(){setColWidths("#"+$(this).attr("id"))}),$("#modules_form").find("tbody tr").each(function(){var row=$(this),cells=row.children("td"),searchStrings=[];$.each(cells,function(i,el){var text=el.innerText||el.textContent,moduleNameEl=el.querySelector("[data-name]"),moduleHrefEl=el.querySelector('a[href^="edit?"]');text&&searchStrings.push(text.trim()),moduleNameEl&&searchStrings.push(moduleNameEl.getAttribute("data-name").trim()),moduleHrefEl&&searchStrings.push(moduleHrefEl.getAttribute("href").split("name=")[1])}),row.attr("data-filter",searchStrings.join(" "))}),$("#modules_form").before(moduleFilter),$(document).on("keydown",".moduleFilter input",function(e){var target=(e=e||window.event).target||e.srcElement;27===e.keyCode&&(target.value?setTimeout(function(){clearModuleFilter()},0):target.blur())}),$(document).on("click",".moduleFilter i",function(){return clearModuleFilter(),!1}),$(document).on("keydown",".moduleFilter input",function(e){e=e||window.event;var tabID,prevTab,nextTab,currentTab=$("#modules_form").find(".WireTabs .on"),hasMatchesTabs=$(".WireTabs .hasMatches"),keyCode=e.keyCode||e.charCode||e.which,arrow={left:37,up:38,right:39,down:40};if(e.metaKey||e.ctrlKey){var nextMatches=currentTab.parent().nextAll("li").has(".hasMatches"),prevMatches=currentTab.parent().prevAll("li").has(".hasMatches");if(hasMatchesTabs.length<2)return!0;switch(keyCode){case arrow.left:return e.preventDefault(),prevTab=prevMatches.length?prevMatches.first():hasMatchesTabs.last().parent(),currentTab.find("a").removeClass("on"),tabID=prevTab.find("a").attr("id").slice(1),$(".WireTab").css("display","none"),$(".WireTab#"+tabID).css("display","block"),prevTab.find("a").addClass("on").trigger("click"),!1;case arrow.right:return e.preventDefault(),nextTab=nextMatches.length?nextMatches.first():hasMatchesTabs.first().parent(),currentTab.find("a").removeClass("on"),tabID=nextTab.find("a").attr("id").slice(1),$(".WireTab").css("display","none"),$(".WireTab#"+tabID).css("display","block"),nextTab.find("a").addClass("on").trigger("click"),!1}}}),$(document).on("input keypress keyup fieldchange",".moduleFilter input",debounce(function(e){var target=e.target||e.srcElement,filter=target.value.toLowerCase(),items=$("#modules_form").find(".AdminDataTable").find("td"),keyCode=e.keyCode||e.charCode,length=filter.length;if($(".WireTabs a").removeClass("hasMatches"),13==keyCode)return $("tr:not(.hidden) a").length&&$("tr:not(.hidden) a").first().get(0).click(),!1;if(!target.value)return clearModuleFilter(),!0;if($(target).parent().addClass("hasValue"),length>0){var filter_tags=filter.split(" ");items.each(function(){var $this=$(this).parent("tr"),matches=!0,itemFilters=$this.attr("data-filter");if($.each(filter_tags,function(i,a_filter){-1===itemFilters.toLowerCase().indexOf(a_filter)&&(matches=!1)}),matches){$this.removeClass("hidden");var tabID="_"+$this.parents('li[id^="tab_"]').first().attr("id");$(".WireTabs li a#"+tabID).addClass("hasMatches")}else $this.addClass("hidden")})}else items.removeClass("hidden");return $("html").hasClass("flatModules")||$(".modules_section").each(function(){$(this).toggleClass("hidden",0==$(this).find("tbody tr:not(.hidden)").length)}),items.filter(".hidden").length==items.length?27==keyCode||8==keyCode||37==keyCode||46==keyCode:void 0},200)))}}if(_isEnabled("RenoTweaks")&&$("body").hasClass("AdminThemeReno")){var closeQuicklinksTimer,renoTweaksSettings=AOSsettings.RenoTweaks;if($(document).on("mouseleave","ul.quicklinks, #main-nav > li > ul > li",function(){var speed=$("html").hasClass("sbAutoHide")?0:400;closeQuicklinksTimer=setTimeout(function(){$("ul.quicklinks:visible").removeAttr("style"),$("a.quicklinks-open").removeClass("quicklinks-open").children("i").removeClass("active")},speed)}),$(document).on("mouseenter","ul.quicklinks, i.quicklink-open",function(){closeQuicklinksTimer&&clearTimeout(closeQuicklinksTimer)}),-1!==renoTweaksSettings.indexOf("sbSingleClickHeads")&&-1!==renoTweaksSettings.indexOf("sbItemsVisible")&&$("#sidebar > #main-nav > li > a").on("click",function(){return window.location.href=$(this).attr("href"),!1}),window.Ps){var sidebarNav=document.querySelector("#main-nav"),mainContent=document.querySelector("body:not(.modal-inline) #main"),PsSettings={wheelSpeed:2,theme:"pw-scrollbar",suppressScrollX:!0,wheelPropagation:!0};sidebarNav&&-1!==renoTweaksSettings.indexOf("miniScrollSb")&&Ps.initialize(sidebarNav,PsSettings),mainContent&&-1!==renoTweaksSettings.indexOf("miniScrollMain")&&Ps.initialize(mainContent,PsSettings)}}if($("body[data-navitems]").length){var topNavElem,$NavItems=$($("body").attr("data-navitems")),topNavHasItems=!0;if($("body").hasClass("AdminThemeReno")?(topNavElem=$("#main-nav li:eq(0) > ul")).length||(topNavElem=$("#main-nav"),topNavHasItems=!1):(topNavElem=$("#topnav li:eq(0) .pw-dropdown-menu.topnav")).length||(topNavElem=$("#topnav li:eq(0) .dropdown-menu.topnav")),$(".AdminThemeReno").length&&($("#main-nav").find('a[data-icon="sitemap"]').find("i.fa-sitemap").remove(),$("#main-nav").find("a.current").removeClass("current")),$(".AdminThemeReno .navItem.hasSubmenu a.current").parents(".hasSubmenu").first().addClass("active"),topNavHasItems)$NavItems.children("li").each(function(){topNavElem.append($(this))});else{var firstNavItem=topNavElem.children("li").first();firstNavItem.append("<ul>"),$NavItems.each(function(){firstNavItem.children("ul").append($(this))})}$("body").removeAttr("data-navitems")}if(_isEnabled("PagePreviewBtn")){var pageTitleSelector=$("body").hasClass("AdminThemeDefault")?"#breadcrumbs li.title":"#headline #title";if($(pageTitleSelector).length&&$("a#_ProcessPageEditView").length){var pageTitle=$(pageTitleSelector),pageViewUrl=$("a#_ProcessPageEditView").attr("href");0==pageTitle.children(".pageTitleLink").length&&(pageTitle.children("span").length||pageTitle.wrapInner("<span>"),pageTitle.append('<a href="'+pageViewUrl+'" id="aos_PagePreviewBtn" class="'+AOSsettings.PagePreviewBtn+'" target="_blank"><i class="fa fa-external-link"></i></a>'))}$("#aos_PagePreviewBtn").hover(function(){$(this).prev(".aos_EditTemplate").css("display","none")},function(){$(this).prev(".aos_EditTemplate").removeAttr("style")})}if(_isEnabled("RestrictTreeDropdown")&&!0===AOSsettings.RestrictTreeDropdown&&($('a[href$="/page/list/"]').parent("li").remove(),$('a[href$="/page/"]').children("i.quicklink-open").remove()),_isEnabled("FileFieldTweaks")){var FileFieldTweaksSettings=AOSsettings.FileFieldTweaks,$filterInput=$("<span class='InputfieldFileFieldFilter filterbox'><input placeholder='&#128269;' type='text' /><i class='fa fa-close'></i></span>"),filterFieldSelector=".InputfieldImage.Inputfield:not(.filterbox_loaded), .InputfieldFile.Inputfield:not(.filterbox_loaded)",getItemSelector=function(field){return field.hasClass("InputfieldImage")?".gridImage:not(.gridImagePlaceholder)":".InputfieldFileItem"};-1!==FileFieldTweaksSettings.indexOf("moveAssetButtons")&&$(document).on("click",".aos_moveAssets i",function(){var parent=$(this).parents(".ui-sortable").first(),button=$(this),currentItem=$(this).parents("li").first();currentItem.fadeOut(300,function(){button.is("[data-up]")?currentItem.prependTo(parent):currentItem.appendTo(parent),parent.children("li").each(function(n){$(this).find(".InputfieldFileSort").val(n)}),parent.parent().find('input[type="file"]').first().trigger("change"),currentItem.fadeIn(300)})}),-1!==FileFieldTweaksSettings.indexOf("filterbox")&&($(filterFieldSelector).on("DOMNodeInserted.aos_filterbox",function(e){var target=e.target||e.srcElement,field=$(target).closest("li.Inputfield"),itemSelector=getItemSelector(field);$(target).is(itemSelector)&&field.find(itemSelector).length>=2&&(field.find(".InputfieldFileFieldFilter").removeAttr("style"),field.off("DOMNodeInserted.aos_filterbox"))}),$(filterFieldSelector+":not(.collapsed10)").each(function(){setupFilterInput($(this))}),$(document).on("opened reloaded",filterFieldSelector,function(){$(filterFieldSelector).each(function(){setupFilterInput($(this))})}).on("wiretabclick",function(e,$newTab){$newTab.find(filterFieldSelector).each(function(){setupFilterInput($(this))})}),$(document).on("hover click",".InputfieldFileFieldFilter input",function(e){var target=e.target||e.srcElement,field=$(target).closest("li.Inputfield");return!$(target).is(":focus")&&(field.find(".InputfieldImageEdit__close").trigger("click"),addFilterTargets(field),e.stopPropagation(),!1)}),$(document).on("click",".InputfieldFileFieldFilter i",function(e){var target=(e=e||window.event).target||e.srcElement;return clearFilterbox($(target).closest(".InputfieldFileFieldFilter").find("input")),!1}),$(document).on("keydown",".InputfieldFileFieldFilter input",function(e){var target=(e=e||window.event).target||e.srcElement;27===e.keyCode&&(target.value?clearFilterbox($(target).closest(".InputfieldFileFieldFilter").find("input")):target.blur())}),$(document).on("input keypress keyup fieldchange",".InputfieldFileFieldFilter input",debounce(function(e){var target=e.target||e.srcElement,filter=target.value.toLowerCase(),field=$(target).closest("li.Inputfield"),items=field.find("[data-filter]"),length=filter.length;if(!target.value)return $(target).parent().removeClass("hasValue"),items.removeClass("hidden"),!0;if($(target).parent().addClass("hasValue"),field.find(".InputfieldImageEdit__close").trigger("click"),length>0){var filter_tags=filter.split(" ");items.each(function(){var $this=$(this),matches=!0,itemFilters=$this.attr("data-filter");void 0!==itemFilters&&!1!==itemFilters&&($.each(filter_tags,function(i,a_filter){-1===itemFilters.toLowerCase().indexOf(a_filter)&&(matches=!1)}),matches?$this.removeClass("hidden"):$this.addClass("hidden"))})}else items.removeClass("hidden");return items.filter(".hidden").length==items.length?27==e.keyCode||8==e.keyCode||37==e.keyCode||46==e.keyCode:void 0},200)))}}});